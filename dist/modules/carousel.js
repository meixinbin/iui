/*!
 * =====================================================
 * iui v1.0.0 ()
 * =====================================================
 */

!function(e){"use strict";var i={config:{},set:function(i){var n=this;return n.config=e.extend({},n.config,i),n},on:function(e,i){return iui.onevent.call(this,MOD_NAME,e,i)}},n="iui-this",t="iui-carousel-arrow",o="iui-carousel-ind",a=function(n){var t=this;t.config=e.extend({},t.config,i.config,n),t.render()};a.prototype.config={width:"600px",height:"280px",full:!1,arrow:"hover",indicator:"inside",autoplay:!0,interval:3e3,anim:"",trigger:"click",index:0},a.prototype.render=function(){var i=this,t=i.config;t.elem=e(t.elem),t.elem[0]&&(i.elemItem=t.elem.find(">*[carousel-item]>*"),t.index<0&&(t.index=0),t.index>=i.elemItem.length&&(t.index=i.elemItem.length-1),t.interval<800&&(t.interval=800),t.full?t.elem.css({position:"fixed",width:"100%",height:"100%",zIndex:9999}):t.elem.css({width:t.width,height:t.height}),t.elem.attr("lay-anim",t.anim),i.elemItem.eq(t.index).addClass(n),i.elemItem.length<=1||(i.indicator(),i.arrow(),i.autoplay(),i.events()))},a.prototype.reload=function(i){var n=this;clearInterval(n.timer),n.config=e.extend({},n.config,i),n.render()},a.prototype.prevIndex=function(){var e=this,i=e.config.index-1;return i<0&&(i=e.elemItem.length-1),i},a.prototype.nextIndex=function(){var e=this,i=e.config.index+1;return i>=e.elemItem.length&&(i=0),i},a.prototype.addIndex=function(e){var i=this,n=i.config;e=e||1,n.index=n.index+e,n.index>=i.elemItem.length&&(n.index=0)},a.prototype.subIndex=function(e){var i=this,n=i.config;e=e||1,n.index=n.index-e,n.index<0&&(n.index=i.elemItem.length-1)},a.prototype.autoplay=function(){var e=this,i=e.config;i.autoplay&&(e.timer=setInterval(function(){e.slide()},i.interval))},a.prototype.arrow=function(){var i=this,n=i.config,o=e(['<button class="iui-icon '+t+'" lay-type="sub">'+("updown"===n.anim?"&#xe619;":"&#xe603;")+"</button>",'<button class="iui-icon '+t+'" lay-type="add">'+("updown"===n.anim?"&#xe61a;":"&#xe602;")+"</button>"].join(""));n.elem.attr("lay-arrow",n.arrow),n.elem.find("."+t)[0]&&n.elem.find("."+t).remove(),n.elem.append(o),o.on("click",function(){var n=e(this).attr("lay-type");i.slide(n)})},a.prototype.indicator=function(){var i=this,n=i.config,t=i.elemInd=e(['<div class="'+o+'"><ul>',function(){var e=[];return iui.each(i.elemItem,function(i){e.push("<li"+(n.index===i?' class="iui-this"':"")+"></li>")}),e.join("")}(),"</ul></div>"].join(""));n.elem.attr("lay-indicator",n.indicator),n.elem.find("."+o)[0]&&n.elem.find("."+o).remove(),n.elem.append(t),"updown"===n.anim&&t.css("margin-top",-t.height()/2),t.find("li").on("hover"===n.trigger?"mouseover":n.trigger,function(){var t=e(this).index();t>n.index?i.slide("add",t-n.index):t<n.index&&i.slide("sub",n.index-t)})},a.prototype.slide=function(e,i){var t=this,o=t.elemItem,a=t.config,r=a.index;a.elem.attr("lay-filter");t.haveSlide||("sub"===e?(t.subIndex(i),o.eq(a.index).addClass("iui-carousel-prev"),setTimeout(function(){o.eq(r).addClass("iui-carousel-right"),o.eq(a.index).addClass("iui-carousel-right")},50)):(t.addIndex(i),o.eq(a.index).addClass("iui-carousel-next"),setTimeout(function(){o.eq(r).addClass("iui-carousel-left"),o.eq(a.index).addClass("iui-carousel-left")},50)),setTimeout(function(){o.removeClass(n+" iui-carousel-prev iui-carousel-next iui-carousel-left iui-carousel-right"),o.eq(a.index).addClass(n),t.haveSlide=!1},300),t.elemInd.find("li").eq(a.index).addClass(n).siblings().removeClass(n),t.haveSlide=!0)},a.prototype.events=function(){var e=this,i=e.config;i.elem.data("haveEvents")||(i.elem.on("mouseenter",function(){clearInterval(e.timer)}).on("mouseleave",function(){e.autoplay()}),i.elem.data("haveEvents",!0))},i.render=function(e){return new a(e)}}(jQuery);