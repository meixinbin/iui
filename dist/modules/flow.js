/*!
 * =====================================================
 * iui v1.0.0 ()
 * =====================================================
 */

layui.define("jquery",function(e){"use strict";var l=layui.$,o=function(e){};o.prototype.load=function(e){var o,i,t,n=this,r=0,a=l((e=e||{}).elem);if(a[0]){var c=l(e.scrollElem||document),m=e.mb||50,f=!("isAuto"in e)||e.isAuto,s=e.end||"没有更多了",u=e.scrollElem&&e.scrollElem!==document,y=l('<div class="layui-flow-more"><a href="javascript:;"><cite>加载更多</cite></a></div>');a.find(".layui-flow-more")[0]||a.append(y);var d=function(e,t){e=l(e),y.before(e),(t=0==t||null)?y.html(s):y.find("a").html("<cite>加载更多</cite>"),i=t,o=null,p&&p()},h=function(){o=!0,y.find("a").html('<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>'),"function"==typeof e.done&&e.done(++r,d)};if(h(),y.find("a").on("click",function(){l(this);i||o||h()}),e.isLazyimg)var p=n.lazyimg({elem:e.elem+" img",scrollElem:e.scrollElem});return f?(c.on("scroll",function(){var e=l(this),n=e.scrollTop();t&&clearTimeout(t),i||(t=setTimeout(function(){var i=u?e.height():l(window).height();(u?e.prop("scrollHeight"):document.documentElement.scrollHeight)-n-i<=m&&(o||h())},100))}),n):n}},o.prototype.lazyimg=function(e){var o,i=this,t=0,n=l((e=e||{}).scrollElem||document),r=e.elem||"img",a=e.scrollElem&&e.scrollElem!==document,c=function(e,l){var o=n.scrollTop(),r=o+l,c=a?e.offset().top-n.offset().top+o:e.offset().top;if(c>=o&&c<=r&&!e.attr("src")){var f=e.attr("lay-src");layui.img(f,function(){var l=i.lazyimg.elem.eq(t);e.attr("src",f).removeAttr("lay-src"),l[0]&&m(l),t++})}},m=function(e,o){var m=a?(o||n).height():l(window).height(),f=n.scrollTop(),s=f+m;if(i.lazyimg.elem=l(r),e)c(e,m);else for(var u=0;u<i.lazyimg.elem.length;u++){var y=i.lazyimg.elem.eq(u),d=a?y.offset().top-n.offset().top+f:y.offset().top;if(c(y,m),t=u,d>s)break}};if(m(),!o){var f;n.on("scroll",function(){var e=l(this);f&&clearTimeout(f),f=setTimeout(function(){m(null,e)},50)}),o=!0}return m},e("flow",new o)});